#include<bits/stdc++.h>
using namespace std;
int n,m,c,k,ans;
int a[35],b[30];
int p[1005],q[1005];
struct node{
	string b;
}l[33];
int main(){
	freopen("zoo.in","r",stdin);
	freopen("zoo.out","w",stdout);
	cin>>n>>m>>c>>k;	
	l[0].b="0000000000";
	l[1].b="0000000001";
	l[2].b="0000000010";
	l[3].b="0000000011";
	l[4].b="0000000100";
	l[5].b="0000000101";
	l[6].b="0000000110";
	l[7].b="0000000111";
	l[8].b="0000001000";
	l[9].b="0000001001";
	l[10].b="0000001010";
	l[11].b="0000001011";
	l[12].b="0000001100";
	l[13].b="0000001101";
	l[14].b="0000001110";
	l[15].b="0000001111";
	l[16].b="0000010000";
	l[17].b="0000010001";
	l[18].b="0000010010";
	l[19].b="0000010011";
	l[20].b="0000010100";
	l[21].b="0000010101";
	l[22].b="0000010110";
	l[23].b="0000010111";
	l[24].b="0000011000";
	l[25].b="0000011001";
	l[26].b="0000011010";
	l[27].b="0000011011";
	l[28].b="0000011100";
	l[29].b="0000011101";
	l[30].b="0000011110";
	l[31].b="0000011111";
	l[32].b="0000100000";
	for(int i=1;i<=n;i++){
		cin>>a[i];
	}
	for(int i=1;i<=m;i++){
		cin>>p[i]>>q[i];
	}
	for(int i=1;i<=n;i++){
		for(int j=1;j<=m;j++){
			if(l[a[i]].b[9-p[j]]==1) b[q[j]]=1;
		}
	}
	int ww=1;
	for(int i=1;i<=k;i++) ww*=2;
	for(int i=1;i<=ww;i++){
		int flag=1;
		for(int j=1;j<=m;j++){
			if(l[i].b[9-p[j]]==1&&b[q[j]]==0){
				flag=0;
				break;
			}
		}
		if(flag) ans++;
	}
	cout<<ans-n;
}
